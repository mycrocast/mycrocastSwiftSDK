<!DOCTYPE html>
<html lang="en">
  <head>
    <title>How to Chat  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="How to Chat  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">MycrocastSDK Docs</a> (71% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">MycrocastSDK Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
        How to Chat  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="overview.html">Overview</a>
              </li>
              <li class="nav-group-task">
                <a href="getting-started.html">Getting started</a>
              </li>
              <li class="nav-group-task">
                <a href="connecting-to-a-live-stream.html">Connecting to a live stream</a>
              </li>
              <li class="nav-group-task">
                <a href="what-is-a-livestream.html">What is a LiveStream</a>
              </li>
              <li class="nav-group-task">
                <a href="mycrocast---entry.html">Mycrocast - Entry</a>
              </li>
              <li class="nav-group-task">
                <a href="advertisement.html">Advertisement</a>
              </li>
              <li class="nav-group-task">
                <a href="how-to-chat.html">How to Chat</a>
              </li>
              <li class="nav-group-task">
                <a href="errors.html">Errors</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Example.html">Example</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="example-app-overview.html">Example App Overview</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app--audiosession---handling-a-stream.html">Example App  AudioSession - Handling a Stream</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app-playing-the-audio.html">Example App playing the audio</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app-livestreamcell.html">Example App LiveStreamCell</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app---advertisementbanner.html">Example App - AdvertisementBanner</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app---streamerview.html">Example App - StreamerView</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app---chat.html">Example App - Chat</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app-viewcontroller.html">Example App ViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Classes.html#/s:12MycrocastSDK18AudioPackageBufferC">AudioPackageBuffer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DelayTimeContainer.html">DelayTimeContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LiveScoringStream.html">LiveScoringStream</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LiveStream.html">LiveStream</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Mycrocast.html">Mycrocast</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MycrocastAdvertisement.html">MycrocastAdvertisement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MycrocastAssetProvider.html">MycrocastAssetProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MycrocastError.html">MycrocastError</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Streamer.html">Streamer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Enums.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/ChatStatus.html">ChatStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ErrorType.html">ErrorType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RatingError.html">RatingError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ReportReason.html">ReportReason</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Sender.html">Sender</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SessionState.html">SessionState</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/UserStreamRating.html">UserStreamRating</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Extensions.html#/AppKit">AppKit</a>
              </li>
              <li class="nav-group-task">
                <a href="Other%20Extensions.html#/DecodableDefault">DecodableDefault</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/AdvertisementDelegate.html">AdvertisementDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Advertisements.html">Advertisements</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Chat.html">Chat</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ChatDelegate.html">ChatDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ErrorReceiving.html">ErrorReceiving</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Rating.html">Rating</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SessionControl.html">SessionControl</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StreamSessionDelegate.html">StreamSessionDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Streams.html">Streams</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StreamsDelegate.html">StreamsDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Message.html">Message</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StreamLanguage.html">StreamLanguage</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Team.html">Team</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='ios-chat' class='heading'>iOS Chat</h1>

<p>This document describes everything you need to know to get started with the chat</p>

<p>Check the example app to see the implementation in use</p>
<h2 id='relevant-classes' class='heading'>Relevant classes</h2>

<ul>
<li><code><a href="Protocols/Chat.html">Chat</a></code> - Protocol for interacting with the mycrocast SDK chat</li>
<li><code><a href="Protocols/ChatDelegate.html">ChatDelegate</a></code>- Protocol to implement the receiving of chat message and chat room updates</li>
<li><code><a href="Structs/Message.html">Message</a></code> - A single chat message</li>
<li><code><a href="Enums/Sender.html">Sender</a></code> - enum describing who was the sender of the message</li>
<li><code><a href="Enums/ChatStatus.html">ChatStatus</a></code> - enum describing the status of the chat, either enabled or disabled as configured by the streamer</li>
<li><code><a href="Enums/ReportReason.html">ReportReason</a></code> - In case a chat message needs to be reported this is the available selection of reasons as enum</li>
</ul>
<h2 id='concepts' class='heading'>Concepts</h2>

<p>Every interaction with the chat is handled through the Mycrocast.Chat protocol implementation.</p>
<h3 id='receiving-chat-messages' class='heading'>Receiving chat messages</h3>

<p>The first step you should do is create a class that conforms to the ChatDelegate protocol</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ChatDelegate</span> <span class="p">{</span>
    <span class="cm">/**
     A new chat message was received. Inspect the streamId of the message to determine for which chat this message
      was received for in case you have multiple chats joined
     - Parameter message: the new message
     */</span>
    <span class="kd">func</span> <span class="nf">onMessage</span><span class="p">(</span><span class="n">_</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">Message</span><span class="p">)</span>
    <span class="cm">/**
     A chat status update was received. This is when the streamer decides to either enable or disable the chat
     - Parameters:
       - streamId: the id of the stream to which this chatroom belongs to
       - status: the new status of the chat
     */</span>
    <span class="kd">func</span> <span class="nf">onChatStatusChanged</span><span class="p">(</span><span class="n">_</span> <span class="nv">streamId</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">status</span><span class="p">:</span> <span class="kt">ChatStatus</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>The next step is to register this class as an observer for the chat</p>
<pre class="highlight swift"><code>  <span class="kt">Mycrocast</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="nf">addObserver</span><span class="p">(</span><span class="k">self</span><span class="p">);</span>
</code></pre>

<p>You are now set to receive updates for the chat</p>
<h3 id='joining-a-chat-room' class='heading'>Joining a chat room</h3>

<p>Before you can interact with a specific chat room you first need to join the chat room. Before joining there is no information available if the chat is actually enabled by the streamer and if chat messages are present.</p>

<p>After joining the chat room the callback closure is called with the response of the chat room join. After you joined you start receiving updates for the chat.</p>
<pre class="highlight swift"><code>    <span class="cm">/**
      To be able to participate in the chat for a stream we first need to join it.
      After the chat was joined we receive the status of the chat room (enabled or disabled) and receive updates for new
      chat messages
     - Parameters:
       - streamId: the stream id where we want to join the chat for
       - callback: The callback that is executed when the chat was joined containing the chat messages, status and potential error
     */</span>
    <span class="kd">func</span> <span class="nf">joinChat</span><span class="p">(</span><span class="n">_</span> <span class="nv">streamId</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="n">_</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span><span class="kt">Message</span><span class="p">],</span> <span class="n">_</span> <span class="nv">chatStatus</span><span class="p">:</span> <span class="kt">ChatStatus</span><span class="p">,</span> <span class="n">_</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">MycrocastError</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="p">())</span>
</code></pre>
<h3 id='leaving-a-chat-room' class='heading'>Leaving a chat room</h3>

<p>To leave a chatroom just call levateChat with the id of the stream that chat belongs to. Afterwards you will not receive any more updates in the observer for that chat room.</p>
<pre class="highlight swift"><code>   <span class="cm">/**
     Leave a chat and therefore automatically unsubscribing for receiving and updates on this specific chatroom
     When a stream ends the chat is automatically left
     - Parameter streamId: the id of the stream
     */</span>
    <span class="kd">func</span> <span class="nf">leaveChat</span><span class="p">(</span><span class="n">_</span> <span class="nv">streamId</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span>
</code></pre>
<h3 id='send-a-message' class='heading'>Send a message</h3>

<p>To send a chat message just call sendChatMessage with the id of the stream that chat belongs to and the actual message you want to send.</p>

<p>The message will only be send if you are joined in the chat and if the streamer did not disable the chatroom. A single message can only have 255 characters and everything larger will be cut off. You should limit the number of characters your user can enter.</p>
<pre class="highlight swift"><code>    <span class="cm">/**
        Send a new chat message. A message is can only be at maximum 255 characters long.If the message is longer,
         it will be the first 255 characters send
     - Parameters:
       - streamId: the id of the chatroom this message will be send to
       - message: the message to send either completely or the first 255 characters
       - callback: the callback executed when the request is done, the bool indicates if you where allowed to send or if you
        are blocked from the streamer
     */</span>
    <span class="kd">func</span> <span class="nf">sendChatMessage</span><span class="p">(</span><span class="n">_</span> <span class="nv">streamId</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="n">_</span> <span class="nv">success</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="n">_</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">MycrocastError</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="p">())</span>
</code></pre>
<h3 id='reporting-a-chat-message' class='heading'>Reporting a chat message</h3>

<p>You can provide your users with the functionality to report a chat message. Just call reportChatMessage with the message you want to report, a report reason and any additional information you want to provide. The more information we receive the better we can decide what our next steps are regarding that message.</p>
<pre class="highlight swift"><code>    <span class="cm">/**
     Report a chat message and therefore the user of that chat message
      The more information the reporter provides the better we can take action
     - Parameters:
       - message: the message that will be reported
       - reason: the report reason
       - additionalInformation: any additional information the user can provide at maximum 255 characters
       - callback: executed when the response is received from the server
     */</span>
    <span class="kd">func</span> <span class="nf">reportChatMessage</span><span class="p">(</span><span class="n">_</span> <span class="nv">message</span><span class="p">:</span> <span class="kt">Message</span><span class="p">,</span> <span class="nv">reason</span><span class="p">:</span> <span class="kt">ReportReason</span><span class="p">,</span> <span class="nv">additionalInformation</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
                           <span class="nv">callback</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="n">_</span> <span class="nv">success</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="n">_</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">MycrocastError</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="p">())</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2025 <a class="link" href="https://mycrocast.com" target="_blank" rel="external noopener">mycrocast Gmhb</a>. All rights reserved. (Last updated: 2025-03-21)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.4</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
