<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Advertisement  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="Advertisement  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">MycrocastSDK Docs</a> (71% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">MycrocastSDK Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
        Advertisement  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="overview.html">Overview</a>
              </li>
              <li class="nav-group-task">
                <a href="getting-started.html">Getting started</a>
              </li>
              <li class="nav-group-task">
                <a href="connecting-to-a-live-stream.html">Connecting to a live stream</a>
              </li>
              <li class="nav-group-task">
                <a href="what-is-a-livestream.html">What is a LiveStream</a>
              </li>
              <li class="nav-group-task">
                <a href="mycrocast---entry.html">Mycrocast - Entry</a>
              </li>
              <li class="nav-group-task">
                <a href="advertisement.html">Advertisement</a>
              </li>
              <li class="nav-group-task">
                <a href="how-to-chat.html">How to Chat</a>
              </li>
              <li class="nav-group-task">
                <a href="errors.html">Errors</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Example.html">Example</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="example-app-overview.html">Example App Overview</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app--audiosession---handling-a-stream.html">Example App  AudioSession - Handling a Stream</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app-playing-the-audio.html">Example App playing the audio</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app-livestreamcell.html">Example App LiveStreamCell</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app---advertisementbanner.html">Example App - AdvertisementBanner</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app---streamerview.html">Example App - StreamerView</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app---chat.html">Example App - Chat</a>
              </li>
              <li class="nav-group-task">
                <a href="example-app-viewcontroller.html">Example App ViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Classes.html#/s:12MycrocastSDK18AudioPackageBufferC">AudioPackageBuffer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DelayTimeContainer.html">DelayTimeContainer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LiveScoringStream.html">LiveScoringStream</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/LiveStream.html">LiveStream</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Mycrocast.html">Mycrocast</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MycrocastAdvertisement.html">MycrocastAdvertisement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MycrocastAssetProvider.html">MycrocastAssetProvider</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MycrocastError.html">MycrocastError</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Streamer.html">Streamer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Enums.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/ChatStatus.html">ChatStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ErrorType.html">ErrorType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RatingError.html">RatingError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ReportReason.html">ReportReason</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Sender.html">Sender</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SessionState.html">SessionState</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/UserStreamRating.html">UserStreamRating</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Extensions.html#/AppKit">AppKit</a>
              </li>
              <li class="nav-group-task">
                <a href="Other%20Extensions.html#/DecodableDefault">DecodableDefault</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/AdvertisementDelegate.html">AdvertisementDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Advertisements.html">Advertisements</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Chat.html">Chat</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ChatDelegate.html">ChatDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ErrorReceiving.html">ErrorReceiving</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Rating.html">Rating</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SessionControl.html">SessionControl</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StreamSessionDelegate.html">StreamSessionDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Streams.html">Streams</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/StreamsDelegate.html">StreamsDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Message.html">Message</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StreamLanguage.html">StreamLanguage</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Team.html">Team</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='ios-advertisement' class='heading'>iOS - Advertisement</h1>

<p>This document describes everything relevant to the advertisement workflow in the iOS SDK.</p>

<p>To see the advertisement in action consider the following classes in the example app:</p>

<ul>
<li>AdvertisementView (displayed during the play of an advertisement)</li>
<li>AdvertisementPlayer (playing the audio of the advertisement)</li>
<li>AdPlayManager (control for displaying banner, starting audio, muting live stream )</li>
<li>AudioSession (Registered for advertisement updates to pass to AdPlayManager)</li>
</ul>
<h2 id='relevant-classes' class='heading'>Relevant classes</h2>

<ul>
<li><a href="docs/Protocols/Advertisements.html">Advertisements</a> - Protocol to interact with advertisements, get advertisements, receive updates and more</li>
<li><a href="docs/Protocols/AdvertisementDelegate.html">AdvertisementDelegate</a> - Protocol to implement to receive information that a new amount of advertisements are available</li>
<li><a href="docs/Classes/MycrocastAdvertisement.html">MycrocastAdvertisement</a> - represents a single advertisement with the URL of the audio to play as well as an title and optional advertisement banner related information</li>
</ul>
<h2 id='concepts' class='heading'>Concepts</h2>

<p>Everything related to advertisements is done via the Advertisements protocol. The SDK only provides the information that an advertisement is available as well as the information in that advertisement. Display of the provided images as well as playing the audio spot is the responsibility of the implementing side of the SDK.</p>
<h3 id='receiving-advertisement-updates' class='heading'>Receiving Advertisement Updates</h3>

<p>The first step is to create a class that conforms to AdvertisementDelegate.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">AdvertisementDelegate</span> <span class="p">{</span>
    <span class="cm">/**
     Callback when a new number of advertisements is available
     Get the advertisement by calling getNextAdvertisement until no further ads are returned
      Otherwise call ignoreReceivedAdvertisements to remove them from the internal queue
     */</span>
    <span class="kd">func</span> <span class="nf">onAdvertisementAvailable</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>

<p>The second step is to register the above created class with the Advertisements class to receive updates when an advertisement is available.</p>
<pre class="highlight swift"><code><span class="kt">Mycrocast</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">advertisements</span><span class="o">.</span><span class="nf">addObserver</span><span class="p">(</span><span class="nv">advertisementDelegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
</code></pre>

<p>You are now able to receive updates to advertisements. </p>

<p>This step should be done before you start a live stream, as the initial response (preStreamAdvertisement) could already contain an advertisement.</p>

<p>The advertisement push will not trigger the play of an the received advertisements, instead they are queued internally and wait for you to either retrieve them and play them or dequeue and ignore them.</p>

<p>The relevant functions from the Advertisements Protocol:</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">Advertisements</span> <span class="p">{</span>
  <span class="c1">// other functions removed for brevity sake</span>
    <span class="cm">/**
      Get the next advertisement available, this should be called after receiving a push that a new amount of advertisements is present
      Call this again after playing the current ad to check if more ads are available to play.
      A single push of ads could contain multiple ads

      - returns: The next ad to play if any is present
    */</span>
    <span class="kd">func</span> <span class="nf">getAdvertisement</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">MycrocastAdvertisement</span><span class="p">?</span>

    <span class="cm">/**
     Ignore the advertisement push that was just receive, removing the ads from the internal playback queue.
      They cannot be retrieved anymore by the getAdvertisements call.
     */</span>
    <span class="kd">func</span> <span class="nf">ignoreReceivedAdvertisements</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>
<h5 id='playing-the-advertisements' class='heading'>Playing the advertisements</h5>

<p>To receive and play advertisements call the getAdvertisement Function. After a push this function should be called in a loop with the following steps:</p>

<ol>
<li>Check if advertisement is nil, if so you are done or proceed to step 2.</li>
<li>Play Advertisement</li>
<li>When advertisement is done repeat step 1.</li>
</ol>
<h5 id='ignoring-an-advertisement' class='heading'>Ignoring an advertisement</h5>

<p>If you decide to not play the advertisement it is still in the internal queue and therefore will be returned the next time you call getAdvertisement, if this is not the behavior you want, then call ignoreReceivedAdvertisements after receiving an advertisement event.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2025 <a class="link" href="https://mycrocast.com" target="_blank" rel="external noopener">mycrocast Gmhb</a>. All rights reserved. (Last updated: 2025-03-20)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.4</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
